{% extends "base.html" %}

{% block title %}Dashboard - Mouse Domination{% endblock %}

{% block content %}
<div class="space-y-6">
    <h1 class="text-3xl font-bold text-gray-800">Dashboard</h1>

    <!-- Quick Stats -->
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
        <div class="bg-white rounded-lg shadow p-4">
            <div class="text-sm text-gray-500">Total Contacts</div>
            <div class="text-2xl font-bold text-primary-600">{{ total_contacts }}</div>
        </div>
        <div class="bg-white rounded-lg shadow p-4">
            <div class="text-sm text-gray-500">Active Companies</div>
            <div class="text-2xl font-bold text-primary-600">{{ active_companies }}</div>
        </div>
        <div class="bg-white rounded-lg shadow p-4">
            <div class="text-sm text-gray-500">Total Inventory</div>
            <div class="text-2xl font-bold text-primary-600">{{ total_inventory }}</div>
        </div>
        <div class="bg-white rounded-lg shadow p-4">
            <div class="text-sm text-gray-500">Total P/L</div>
            <div class="text-2xl font-bold {% if total_profit_loss >= 0 %}text-green-600{% else %}text-red-600{% endif %}">
                ${{ "%.2f"|format(total_profit_loss) }}
            </div>
        </div>
    </div>

    <!-- Inventory Status -->
    <div class="grid grid-cols-2 md:grid-cols-5 gap-4">
        <div class="bg-white rounded-lg shadow p-4 border-l-4 border-yellow-400">
            <div class="text-sm text-gray-500">In Queue</div>
            <div class="text-xl font-bold">{{ in_queue }}</div>
        </div>
        <div class="bg-white rounded-lg shadow p-4 border-l-4 border-blue-400">
            <div class="text-sm text-gray-500">Reviewing</div>
            <div class="text-xl font-bold">{{ reviewing }}</div>
        </div>
        <div class="bg-white rounded-lg shadow p-4 border-l-4 border-purple-400">
            <div class="text-sm text-gray-500">Listed</div>
            <div class="text-xl font-bold">{{ listed }}</div>
        </div>
        <div class="bg-white rounded-lg shadow p-4 border-l-4 border-green-400">
            <div class="text-sm text-gray-500">Sold</div>
            <div class="text-xl font-bold">{{ sold_count }}</div>
        </div>
        <div class="bg-white rounded-lg shadow p-4 border-l-4 border-gray-400">
            <div class="text-sm text-gray-500">Review Units</div>
            <div class="text-xl font-bold">{{ review_units }} / {{ personal_purchases }}</div>
            <div class="text-xs text-gray-400">review / personal</div>
        </div>
    </div>

    <div class="grid md:grid-cols-2 gap-6">
        <!-- Upcoming Deadlines -->
        <div class="bg-white rounded-lg shadow">
            <div class="p-4 border-b">
                <h2 class="font-semibold text-gray-800">Upcoming Deadlines</h2>
            </div>
            <div class="p-4">
                {% if upcoming_deadlines %}
                    <ul class="space-y-2">
                        {% for item in upcoming_deadlines %}
                            <li class="flex justify-between items-center">
                                <span>{{ item.product_name }}</span>
                                <span class="text-sm {% if item.deadline %}text-red-600 font-medium{% else %}text-gray-500{% endif %}">
                                    {{ item.deadline.strftime('%b %d') if item.deadline else 'No deadline' }}
                                </span>
                            </li>
                        {% endfor %}
                    </ul>
                {% else %}
                    <p class="text-gray-500 text-sm">No upcoming deadlines</p>
                {% endif %}
            </div>
        </div>

        <!-- Recent Inventory -->
        <div class="bg-white rounded-lg shadow">
            <div class="p-4 border-b">
                <h2 class="font-semibold text-gray-800">Recent Inventory</h2>
            </div>
            <div class="p-4">
                {% if recent_inventory %}
                    <ul class="space-y-2">
                        {% for item in recent_inventory %}
                            <li class="flex justify-between items-center">
                                <span>{{ item.product_name }}</span>
                                <span class="text-xs px-2 py-1 rounded-full
                                    {% if item.status == 'in_queue' %}bg-yellow-100 text-yellow-700
                                    {% elif item.status == 'reviewing' %}bg-blue-100 text-blue-700
                                    {% elif item.status == 'reviewed' %}bg-purple-100 text-purple-700
                                    {% elif item.status == 'listed' %}bg-orange-100 text-orange-700
                                    {% elif item.status == 'sold' %}bg-green-100 text-green-700
                                    {% else %}bg-gray-100 text-gray-700{% endif %}">
                                    {{ item.status }}
                                </span>
                            </li>
                        {% endfor %}
                    </ul>
                {% else %}
                    <p class="text-gray-500 text-sm">No inventory yet</p>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="flex flex-wrap gap-4">
        <a href="{{ url_for('inventory.new_item') }}" class="bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition">
            + Add Inventory
        </a>
        <a href="{{ url_for('contacts.new_contact') }}" class="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition">
            + Add Contact
        </a>
        <a href="{{ url_for('companies.new_company') }}" class="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition">
            + Add Company
        </a>
    </div>
</div>
{% endblock %}
